var customTreatment=!1,actualScreen=void 0,intro=1,minLoadTime=0,user={},avatar={_animation:function(a){switch(a){case "default":$($avatar).animate({top:"50px"}).removeClass("animated rubberBand av-loading avatar-speaking").addClass("av-animation");break;case "speaking":$($avatar).removeClass("animated rubberBand av-loading av-animation").addClass("avatar-speaking");break;case "jello":$($avatar).removeClass("av-loading").addClass("av-animation animated jello").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",
function(){$(this).removeClass("animated jello")});break;case "done":$($avatar).removeClass().addClass("animated rubberBand av-centered av-loading"),window.setTimeout(function(){$($avatar).removeClass().addClass("av-centered av-loading")},2E3)}}},content=document.querySelector("#content"),$avatar=document.querySelector("#avatar"),userName=document.querySelector("#user-name"),loadScreen=document.querySelector("#load-screen"),intScr=document.querySelector("#introducing-screen"),intScr_title=document.querySelector("#introducing-screen-title"),
intScr_nameDiv=document.querySelector("#introducing-screen-name-div"),intScr_nameInput=document.querySelector("#introducing-screen-name-input"),intScr_genderDiv=document.querySelector("#introducing-screen-gender-div"),intScr_genderInput=document.querySelector("#introducing-screen-gender-input"),intScr_treatmentDiv=document.querySelector("#introducing-screen-treatment-div"),intScr_treatmentInput=document.querySelector("#introducing-screen-treatment-input"),intScr_treatmentDiv_custom=document.querySelector("#introducing-screen-treatment-div-custom"),
intScr_treatmentInput_custom=document.querySelector("#introducing-screen-treatment-input-custom"),$maleOpts=$('option[value="senhor"], option[value="patr\u00e3o"]'),$femaleOpts=$('option[value="senhorita"], option[value="senhora"], option[value="patroa"]'),intScr_confirmButtonDiv=document.querySelector("#introducing-screen-conf-button"),intScr_confirmButton=document.querySelector(".introducing-screen-conf-button"),_isFirstBoot=localStorage.introduction,_micPermission=localStorage["mic-permission"],
intScr_titleMsg=['<span class="title_Big">Ol\u00e1! <span class="icon ion-happy-outline"></span></span>','<div class="title_Small"><span class="gloss">S</span>istema <br><span class="gloss">O</span>peracional <br><span class="gloss">P</span>ort\u00e1til em <br><span class="gloss">H</span>TML5 com <br><span class="gloss">I</span>ntelig\u00eancia <br><span class="gloss">A</span>rtificial</div>','<span class="title_Med">Me diga seu<br><span class="glossing-letter">primeiro nome</span></span>','<span class="title_Med">Tudo pronto! <span class="icon ion-happy-outline"></span></span>',
'<span class="title_Bigger">SOPH<span class="glossing-letter">i</span>A</span>'],scripts="brain-script js/sophia.brain.js config-script js/sophia.config.js brain-arr-script js/sophia.js voice-script js/sophia.voice.js".split(" "),s_1=document.createElement("script"),s_2=document.createElement("script"),s_3=document.createElement("script");s_4=document.createElement("script");s_1.id=scripts[0];s_1.src=scripts[1];
setTimeout(function(){s_2.id=scripts[2];s_2.src=scripts[3];s_3.id=scripts[4];s_3.src=scripts[5];s_4.id=scripts[6];s_4.src=scripts[7]},1E3);document.body.appendChild(s_1);document.body.appendChild(s_2);document.body.appendChild(s_3);document.body.appendChild(s_4);
function appLoad(){$("#screen").removeClass("animated fadeIn");_isFirstBoot||(localStorage.introduction="yes",document.location.reload());"yes"===_isFirstBoot?introductionScreen():window.setTimeout(function(){avatar._animation("default");changeCommands(defaultCommands);changeActualInput("#user-input");annyangStart();content.style.display="block";$("#system-status").show({effect:"drop",direction:"down"});$(loadScreen).fadeOut()},2E3);micPermission=void 0===micPermission&&"true"===_micPermission?!0:
!1}intScr_nameInput.addEventListener("input",function(){0>=intScr_nameInput.value.length||intScr_nameInput.value.match(/([,.;/<>:?"!@#$%\u00a8&*()_+=\u00b9\u00b2\u00b3\u00a3\u00a2\u00ac\u00a7~^\u00b4`\[\]{}]|[\d]|[\s])/gi)?(intScr_confirmButton.disabled=!0,notification.create("error","Caracteres n\u00e3o permitidos!","img/icons/ionicons/alert-circled.png",3E3)):intScr_confirmButton.disabled=!1});
intScr_treatmentInput_custom.addEventListener("input",function(){0>=intScr_treatmentInput_custom.value.length||intScr_treatmentInput_custom.value.match(/([,.;/<>:?"!@#$%\u00a8&*()_+=\u00b9\u00b2\u00b3\u00a3\u00a2\u00ac\u00a7~^\u00b4`\[\]{}])/gi)?(intScr_confirmButton.disabled=!0,notification.create("error","Caracteres n\u00e3o permitidos!","img/icons/ionicons/alert-circled.png",3E3)):intScr_confirmButton.disabled=!1});
intScr_nameInput.addEventListener("keydown",function(a){switch(a.keyCode){case 32:intScr_confirmButton.click();break;case 13:intScr_confirmButton.click()}});intScr_treatmentInput_custom.addEventListener("keydown",function(a){switch(a.keyCode){case 13:intScr_confirmButton.click()}});
var bootstrap={title:{text:function(a){return intScr_title.innerHTML=a},animation:function(a,b,c){void 0===c?$(intScr_title).removeClass().hide().show().removeClass("animated "+b).addClass("animated "+a):($(intScr_title).removeClass().addClass("animated "+a),window.setTimeout(function(){$(intScr_title).removeClass(a).addClass(b)},c))}}};
function introductionScreen(){intro?(ai.say("Ol\u00e1. Bem-vindao Sistema Operacional Port\u00e1til em HTML5 com Intelig\u00eancia Artificial. Mas esse \u00e9 um nome longo, ent\u00e3o me chame apenas de Sophia."),$(loadScreen).fadeOut(),intScr.style.display="block",window.setTimeout(function(){avatar._animation("jello");bootstrap.title.animation("fadeInUp","fadeOut",1500);bootstrap.title.text(intScr_titleMsg[0]);window.setTimeout(function(){bootstrap.title.animation("fadeIn","fadeOut",7E3);bootstrap.title.text(intScr_titleMsg[1]);
$(".title_Small").addClass("title_SmallLeft");window.setTimeout(function(){$(".gloss").addClass("glossing-letter spacing-letter")},6E3);window.setTimeout(function(){bootstrap.title.animation("fadeInUp","fadeOut");bootstrap.title.text(intScr_titleMsg[4])},8E3);window.setTimeout(function(){permissSettings()},11E3)},2E3)},minLoadTime)):($(loadScreen).fadeOut(),intScr.style.display="block",nameFirstSetting(),window.setTimeout(function(){avatar._animation("jello");bootstrap.title.animation("fadeInUp",
"fadeOut");bootstrap.title.text(intScr_titleMsg[2]);annyangStart()},2E3))}
function permissSettings(){console.log("permissSettings");ai.say("Antes de come\u00e7armos, gostaria de pedir algumas permiss\u00f5es para acessar alguns recursos necess\u00e1rios para meu funcionamento correto. Isso inclui o acesso ao seu microfone e s\u00f3 pode ser feito manualmente, por quest\u00f5es de seguran\u00e7a. Espere enquanto verifico as permiss\u00f5es.");annyang.isListening()?nameFirstSetting():(actualScreen="permissions",changeCommands(defaultCommands),window.setTimeout(function(){annyangStart();
window.setTimeout(function(){$(intScr_confirmButtonDiv).show({effect:"drop",direction:"down"});$(intScr_confirmButton).attr("onclick","nameFirstSetting()");!micPermission&&listening?(ai.say("Clique no bot\u00e3o permitir e logo ap\u00f3s, diga okey para continuarmos."),$("#drawn-arrow-permissions").fadeIn()):listening?micPermission&&listening&&(ai.say("Parece que voc\u00ea j\u00e1 me concedeu permiss\u00e3o. Vamos continuar."),window.setTimeout(function(){$(intScr_confirmButton).click()},5E3)):(ai.say("Parece que h\u00e1 um problema com a conex\u00e3o. Tente novamente quando a internet estiver funcionando normalmente ou continue, sendo que, se continuar, o reconhecimento de voz n\u00e3o ir\u00e1 funcionar."),
$("#drawn-arrow-permissions").hide(),intScr_confirmButton.innerHTML='<span style="font-size: 18pt">Continuar</span>',intScr_confirmButton.setAttribute("onclick","nameFirstSetting()"))},1500)},18E3))}
function nameFirstSetting(){actualScreen="name";bootstrap.title.animation("fadeInUp","fadeOut");bootstrap.title.text(intScr_titleMsg[2]);intScr_genderDiv.style.display="none";$(intScr_nameDiv).delay(3E3).show("slide");window.setTimeout(function(){intScr_nameInput.focus();changeActualInput("#introducing-screen-name-input")},4E3);changeCommands(nameInputCommands);$(intScr_confirmButtonDiv).show({effect:"drop",direction:"down"});$(intScr_confirmButton).attr("onclick","genderFirstSetting()");intScr_confirmButton.innerHTML=
'<span class="icon ion-ios-arrow-right"></span>';intScr_confirmButton.setAttribute("onclick","genderFirstSetting()");intScr_confirmButton.disabled=!0;window.setTimeout(function(){ai.say("Agora preciso que me informe seu primeiro nome apenas.")},400);listening||notification.create("error","O reconhecimento de voz n\u00e3o est\u00e1 funcionando!","",5E3)}
function genderFirstSetting(){actualScreen="gender";intScr_nameInput.value=capitalize(intScr_nameInput.value);user.name=intScr_nameInput.value;notification.create("success","Ol\u00e1, "+user.name+"! :D","img/icons/ionicons/outline/ios7-checkmark-outline.png",4E3);createCustomSelect("#introducing-screen-gender-input");$(intScr_nameDiv).hide("fold");$(intScr_genderDiv).show("fold");$("#drawn-arrow-permissions").fadeOut();$(intScr_confirmButton).attr("onclick","treatmentFirstSetting()").blur();intScr_confirmButton.disabled=
!0;bootstrap.title.animation("fadeInUp","fadeOut");bootstrap.title.text('<span class="title_Small">Voc\u00ea \u00e9 do sexo masculino ou feminino, '+user.name+"?</span>");window.setTimeout(function(){$("#introducing-screen-gender-div .cs-placeholder").click();$("div.cs-skin-slide").focus();intScr_confirmButton.disabled=!1},1E3);changeCommands(genderInputCommands);ai.say("Ok, "+user.name+". Agora me diga se voc\u00ea \u00e9 do sexo masculino ou feminino.")}
function treatmentFirstSetting(){actualScreen="treatment";user.gender=intScr_genderInput.value;switch(user.gender){case "feminino":$maleOpts.remove();user.article="a";notification.create("success","Lembrarei disso.","img/icons/ionicons/woman.png",4E3);break;case "masculino":$femaleOpts.remove(),user.article="o",user._treatment="o senhor",notification.create("success","Lembrarei disso.","img/icons/ionicons/man.png",4E3)}createCustomSelect("#introducing-screen-treatment-input");$(intScr_genderDiv).hide("fold");
$(intScr_treatmentDiv).show("fold");$(intScr_confirmButton).attr("onclick","introDoneScreen()").blur();intScr_confirmButton.disabled=!0;bootstrap.title.animation("fadeInUp","fadeOut");bootstrap.title.text('<span class="title_Small">E como voc\u00ea prefere que eu '+user.article+" chame?</span>");window.setTimeout(function(){$("#introducing-screen-treatment-div .cs-placeholder").click();$("div.cs-skin-slide").focus();intScr_confirmButton.disabled=!1;annyangStart()},1E3);changeCommands(treatmentInputCommands);
ai.say("Como voc\u00ea prefere que eu "+user.article+" chame, "+user.name+"? Voc\u00ea pode escolher uma das op\u00e7\u00f5es sugeridas ou pode dizer uma forma de tratamento de sua prefer\u00eancia.")}
function customTreatmentFn(){"treatment"!==actualScreen||$('li[data-value*="outro"]').hasClass("cs-selected")||(intScr_treatmentDiv_custom.style.display="none",intScr_treatmentInput_custom.value="",customTreatment=!1,intScr_confirmButton.disabled=!1);"treatment"===actualScreen&&$('li[data-value*="outro"]').hasClass("cs-selected")&&(intScr_treatmentDiv_custom.style.display="block",intScr_treatmentInput_custom.focus(),customTreatment=!0,intScr_treatmentInput_custom.value="",intScr_confirmButton.disabled=
!0)}
function introDoneScreen(){if(customTreatment&&""!==intScr_treatmentInput_custom.value||!customTreatment){actualScreen=null;user.treatment=intScr_treatmentInput.value;switch(user.treatment){case "senhor":user.voc=", ";break;case "senhora":user._treatment="a senhora";user.voc=", ";break;case "senhorita":user._treatment="a senhorita";user.voc=", ";break;case "outro":user.treatment=intScr_treatmentInput_custom.value;user.voc=", ";break;case "nenhum":user.voc=", ",user.treatment=""}"feminino"===user.gender&&"outro"===
user.treatment&&(user._treatment="voc\u00ea");salvarDados();localStorage.introduction="no";annyang.abort();$(intScr_treatmentDiv).hide("fold");$("#introducing-screen-done-div").fadeIn();$(intScr_confirmButton).addClass("animated zoomOutDown").blur();intScr_confirmButton.disabled=!0;bootstrap.title.animation("fadeInUp","fadeOut");bootstrap.title.text(intScr_titleMsg[3]);avatar._animation("done");ai.say("Carregando interface.");window.setTimeout(function(){avatar._animation("default");$(intScr_title).removeClass().addClass("animated fadeOutUp");
content.style.display="block";$(intScr).fadeOut();changeCommands(defaultCommands);changeActualInput("#user-input");annyangStart();ai.say("Bem-vind"+user.article+" e "+greeting+user.voc+user.treatment+" "+user.name+".")},6E3)}}window.user=user;
